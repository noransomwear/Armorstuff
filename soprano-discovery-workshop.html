<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Soprano Design | MDR Discovery Workshop</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&family=Lora:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #f8f8f6;
            --bg-secondary: #ffffff;
            --bg-card: #ffffff;
            --bg-input: #f4f4f2;
            --bg-elevated: #eeeee9;
            --accent: #b8960c;
            --accent-light: #d4b622;
            --accent-glow: rgba(184, 150, 12, 0.08);
            --accent-border: rgba(184, 150, 12, 0.25);
            --text: #1a1a1a;
            --text-dim: #4a4a4a;
            --text-muted: #8a8a8a;
            --border: #e2e2dd;
            --border-light: #d5d5cf;
            --success: #16a34a;
            --success-glow: rgba(22, 163, 74, 0.08);
            --radius: 12px;
            --radius-sm: 8px;
            --radius-lg: 16px;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
        }

        /* Subtle grid pattern overlay */
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: radial-gradient(circle at 1px 1px, rgba(0,0,0,0.03) 1px, transparent 0);
            background-size: 40px 40px;
            pointer-events: none;
            z-index: 0;
        }

        /* ─── HEADER ─── */
        .header {
            position: fixed;
            top: 0; left: 0; right: 0;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border-bottom: 1px solid var(--border);
            z-index: 100;
            padding: 0 2rem;
        }

        .header-inner {
            max-width: 960px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 64px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
        }

        .logo-shield {
            width: 32px;
            height: 32px;
            position: relative;
        }

        .logo-shield svg {
            width: 100%;
            height: 100%;
        }

        .logo-text {
            display: flex;
            flex-direction: column;
            line-height: 1.15;
        }

        .logo-brand {
            font-family: 'Inter', sans-serif;
            font-weight: 900;
            font-size: 0.85rem;
            letter-spacing: 0.12em;
            text-transform: uppercase;
            color: var(--text);
        }

        .logo-sub {
            font-size: 0.65rem;
            font-weight: 500;
            color: var(--text-muted);
            letter-spacing: 0.08em;
            text-transform: uppercase;
        }

        .progress {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .progress-bar {
            width: 160px;
            height: 3px;
            background: var(--border);
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--accent);
            transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 2px;
        }

        .progress-text {
            font-size: 0.75rem;
            font-weight: 500;
            color: var(--text-muted);
            letter-spacing: 0.04em;
        }

        /* ─── MAIN ─── */
        main {
            max-width: 960px;
            margin: 0 auto;
            padding: 96px 1.5rem 4rem;
            position: relative;
            z-index: 1;
        }

        /* ─── WELCOME ─── */
        .welcome {
            text-align: center;
            padding: 3.5rem 2.5rem;
            margin-bottom: 2.5rem;
            position: relative;
            border-radius: var(--radius-lg);
            background: radial-gradient(ellipse at 50% 0%, rgba(184,150,12,0.06) 0%, transparent 70%);
            border: 1px solid var(--border);
        }

        .welcome::before {
            content: '';
            position: absolute;
            top: 0; left: 50%;
            transform: translateX(-50%);
            width: 120px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--accent), transparent);
        }

        .welcome-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.35rem 1rem;
            border-radius: 100px;
            border: 1px solid var(--accent-border);
            background: var(--accent-glow);
            font-size: 0.7rem;
            font-weight: 600;
            color: var(--accent);
            letter-spacing: 0.08em;
            text-transform: uppercase;
            margin-bottom: 1.25rem;
        }

        .welcome-badge::before {
            content: '';
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background: var(--accent);
        }

        .welcome h1 {
            font-family: 'Lora', Georgia, serif;
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
            letter-spacing: -0.02em;
            line-height: 1.3;
        }

        .welcome p {
            color: var(--text-dim);
            max-width: 540px;
            margin: 0 auto;
            font-size: 0.95rem;
            line-height: 1.7;
        }

        /* ─── TABS ─── */
        .tabs {
            display: flex;
            gap: 0.35rem;
            margin-bottom: 2.5rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
            scrollbar-width: none;
        }
        .tabs::-webkit-scrollbar { display: none; }

        .tab {
            padding: 0.6rem 1rem;
            background: transparent;
            border: 1px solid var(--border);
            border-radius: 100px;
            color: var(--text-muted);
            font-family: 'Inter', sans-serif;
            font-size: 0.8rem;
            font-weight: 500;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.25s ease;
            letter-spacing: 0.01em;
        }

        .tab:hover {
            border-color: var(--text-muted);
            color: var(--text-dim);
        }

        .tab.active {
            background: #1a1a1a;
            border-color: #1a1a1a;
            color: #ffffff;
        }

        .tab .count {
            display: inline-block;
            padding: 0.1rem 0.45rem;
            border-radius: 100px;
            font-size: 0.65rem;
            font-weight: 600;
            margin-left: 0.4rem;
            background: rgba(0,0,0,0.08);
        }

        .tab.active .count {
            background: rgba(255,255,255,0.25);
        }

        /* ─── SECTIONS ─── */
        .section { display: none; }
        .section.active { display: block; animation: fadeIn 0.35s ease-out; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(8px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-header {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border);
        }

        .section-title {
            font-family: 'Lora', Georgia, serif;
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.35rem;
            letter-spacing: -0.01em;
        }

        .section-desc {
            color: var(--text-dim);
            font-size: 0.9rem;
        }

        /* ─── SUBSECTION ─── */
        .subsec {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 1.5rem;
            margin-bottom: 1.75rem;
        }

        .subsec-title {
            font-weight: 700;
            font-size: 0.95rem;
            margin-bottom: 0.25rem;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .subsec-title::before {
            content: '';
            width: 3px;
            height: 16px;
            background: var(--accent);
            border-radius: 2px;
        }

        .subsec-desc {
            color: var(--text-muted);
            font-size: 0.85rem;
            margin-bottom: 1.25rem;
            padding-left: 1rem;
        }

        /* ─── CARDS ─── */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 1.5rem;
            margin-bottom: 0.75rem;
            transition: all 0.25s ease;
            box-shadow: 0 1px 3px rgba(0,0,0,0.04);
        }

        .card:hover {
            border-color: var(--border-light);
        }

        .card.answered {
            border-color: rgba(22, 163, 74, 0.3);
            background: linear-gradient(135deg, var(--bg-card), rgba(22,163,74,0.04));
        }

        .q-num {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 24px;
            background: var(--bg-elevated);
            border-radius: 6px;
            font-size: 0.7rem;
            font-weight: 700;
            color: var(--text-muted);
            margin-right: 0.75rem;
            flex-shrink: 0;
            letter-spacing: 0;
        }

        .card.answered .q-num {
            background: var(--success);
            color: #fff;
        }

        .q-label {
            font-weight: 500;
            font-size: 0.9rem;
            margin-bottom: 1.1rem;
            display: flex;
            align-items: flex-start;
            line-height: 1.5;
        }

        .q-text { flex: 1; }

        .q-hint {
            display: block;
            font-size: 0.8rem;
            color: var(--text-muted);
            font-weight: 400;
            font-style: normal;
            margin-top: 0.35rem;
            opacity: 0.8;
        }

        /* ─── INPUTS ─── */
        textarea, input[type="text"] {
            width: 100%;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            padding: 0.9rem 1rem;
            color: var(--text);
            font-family: 'Inter', sans-serif;
            font-size: 0.875rem;
            resize: vertical;
            min-height: 100px;
            transition: all 0.2s ease;
            line-height: 1.6;
        }

        textarea:focus, input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px var(--accent-glow);
        }

        ::placeholder {
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        /* ─── OPTIONS ─── */
        .opts {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .opt {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.85rem 1rem;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .opt:hover {
            border-color: var(--border-light);
            background: var(--bg-secondary);
        }

        .opt.sel {
            border-color: var(--accent);
            background: var(--accent-glow);
        }

        .opt input { display: none; }

        .opt-mark {
            width: 18px;
            height: 18px;
            border: 1.5px solid var(--border-light);
            border-radius: 50%;
            flex-shrink: 0;
            position: relative;
            transition: all 0.2s ease;
        }

        .opt-mark.check { border-radius: 5px; }

        .opt.sel .opt-mark {
            border-color: var(--accent);
            background: var(--accent);
        }

        .opt.sel .opt-mark::after {
            content: '';
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
        }

        .opt.sel .opt-mark:not(.check)::after {
            width: 6px;
            height: 6px;
            background: #fff;
            border-radius: 50%;
        }

        .opt.sel .opt-mark.check::after {
            width: 10px;
            height: 10px;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M2.5 6L5 8.5L9.5 4' stroke='%23fff' stroke-width='1.8' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
            background-size: contain;
        }

        .opt-text {
            flex: 1;
            font-size: 0.875rem;
            color: var(--text-dim);
        }

        .opt.sel .opt-text {
            color: var(--text);
        }

        .other-input {
            display: none;
            margin-top: 0.5rem;
            width: 100%;
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            padding: 0.7rem 1rem;
            color: var(--text);
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            transition: all 0.2s ease;
            min-height: auto;
            resize: none;
        }

        .other-input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px var(--accent-glow);
        }

        .other-input.visible { display: block; }

        .grid-opts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.5rem;
        }

        /* ─── MATRIX TABLE ─── */
        .matrix {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 0.75rem;
        }

        .matrix th {
            padding: 0.75rem 1rem;
            text-align: left;
            font-weight: 600;
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: var(--text-muted);
            border-bottom: 1px solid var(--border);
        }

        .matrix td {
            padding: 0.85rem 1rem;
            border-bottom: 1px solid var(--border);
            font-size: 0.875rem;
            color: var(--text-dim);
        }

        .matrix tr:last-child td { border-bottom: none; }

        .matrix select {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 0.5rem 0.75rem;
            color: var(--text);
            font-family: 'Inter', sans-serif;
            font-size: 0.825rem;
            width: 100%;
            cursor: pointer;
            transition: border-color 0.2s;
        }

        .matrix select:focus {
            outline: none;
            border-color: var(--accent);
        }

        /* ─── NAV BUTTONS ─── */
        .nav-btns {
            display: flex;
            justify-content: space-between;
            margin-top: 3rem;
            padding-top: 1.75rem;
            border-top: 1px solid var(--border);
            gap: 1rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border-radius: var(--radius-sm);
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            letter-spacing: 0.01em;
        }

        .btn-sec {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-dim);
        }

        .btn-sec:hover {
            border-color: var(--text-muted);
            color: var(--text);
        }

        .btn-pri {
            background: var(--accent);
            border: none;
            color: #fff;
            font-weight: 700;
        }

        .btn-pri:hover {
            background: var(--accent-light);
            transform: translateY(-1px);
            box-shadow: 0 4px 20px var(--accent-glow);
        }

        /* ─── TOAST ─── */
        .save-toast {
            position: fixed;
            bottom: 1.5rem;
            right: 1.5rem;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: var(--radius-sm);
            padding: 0.65rem 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.8rem;
            font-weight: 500;
            opacity: 0;
            transform: translateY(12px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 50;
            color: var(--text-dim);
        }

        .save-toast.show { opacity: 1; transform: translateY(0); }
        .save-toast.saved { border-color: rgba(22,163,74,0.3); color: var(--success); }

        /* ─── COMPLETE ─── */
        .complete {
            text-align: center;
            padding: 4rem 2rem;
        }

        .complete-icon {
            width: 64px;
            height: 64px;
            background: var(--success);
            border-radius: 50%;
            margin: 0 auto 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            color: #fff;
            box-shadow: 0 0 40px var(--success-glow);
        }

        .complete h2 {
            font-family: 'Lora', serif;
            font-size: 1.75rem;
            margin-bottom: 0.75rem;
        }

        /* ─── FOOTER ─── */
        .footer {
            text-align: center;
            padding: 2rem;
            border-top: 1px solid var(--border);
            margin-top: 2rem;
        }

        .footer-text {
            font-size: 0.7rem;
            color: var(--text-muted);
            letter-spacing: 0.06em;
            text-transform: uppercase;
        }

        .footer-text a {
            color: var(--accent);
            text-decoration: none;
        }

        /* ─── RESPONSIVE ─── */
        @media (max-width: 640px) {
            .header { padding: 0 1rem; }
            .header-inner { height: 56px; }
            main { padding: 80px 1rem 2rem; }
            .welcome { padding: 2rem 1.25rem; }
            .welcome h1 { font-size: 1.5rem; }
            .section-title { font-size: 1.25rem; }
            .nav-btns { flex-direction: column; }
            .btn { justify-content: center; width: 100%; }
            .progress-bar { width: 100px; }
            .card { padding: 1.25rem; }
            .subsec { padding: 1.25rem; }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--border-light); }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-inner">
            <div class="logo">
                <div class="logo-shield">
                    <svg viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M16 2L4 8v8c0 7.73 5.12 14.95 12 16.8 6.88-1.85 12-9.07 12-16.8V8L16 2z" fill="none" stroke="#b8960c" stroke-width="1.5"/>
                        <path d="M16 6L8 10v6c0 5.6 3.41 10.83 8 12.17 4.59-1.34 8-6.57 8-12.17v-6L16 6z" fill="rgba(184,150,12,0.1)" stroke="none"/>
                        <path d="M12.5 16l2.5 2.5 5-5" stroke="#b8960c" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="logo-text">
                    <span class="logo-brand">Armor</span>
                    <span class="logo-sub">MDR Discovery</span>
                </div>
            </div>
            <div class="progress">
                <div class="progress-bar"><div class="progress-fill" id="progressFill" style="width:0%"></div></div>
                <span class="progress-text" id="progressText">0% complete</span>
            </div>
        </div>
    </header>

    <main>
        <div class="welcome">
            <div class="welcome-badge">Discovery Workshop</div>
            <h1>Soprano Design</h1>
            <p>This workshop helps us understand your environment so we can tailor MDR coverage to match your actual infrastructure and priorities.</p>
        </div>

        <nav class="tabs" id="tabs">
            <button class="tab active" data-section="business">Business Overview <span class="count" id="c-business">0/12</span></button>
            <button class="tab" data-section="infrastructure">Infrastructure <span class="count" id="c-infrastructure">0/9</span></button>
            <button class="tab" data-section="identity">Identity & Access <span class="count" id="c-identity">0/5</span></button>
            <button class="tab" data-section="platform">Platform <span class="count" id="c-platform">0/5</span></button>
            <button class="tab" data-section="endpoints">Endpoints <span class="count" id="c-endpoints">0/4</span></button>
            <button class="tab" data-section="risk">Risk <span class="count" id="c-risk">0/5</span></button>
            <button class="tab" data-section="operations">Operations <span class="count" id="c-operations">0/7</span></button>
        </nav>

        <!-- BUSINESS OVERVIEW -->
        <section class="section active" id="s-business">
            <div class="section-header">
                <h2 class="section-title">Business Overview</h2>
                <p class="section-desc">Understanding your organisational structure, integrations, and how different business units operate today.</p>
            </div>

            <div class="subsec">
                <div class="subsec-title">About Your Organisation</div>

                <div class="card" data-q="biz-0a">
                    <label class="q-label"><span class="q-num">1</span><span class="q-text">What are Soprano Design's core services and who are the primary customers?<span class="q-hint">Help us understand the business so we can prioritise what matters most</span></span></label>
                    <textarea name="core-services" placeholder="e.g., 'Enterprise messaging APIs, SMS gateway services for banks and government agencies'..."></textarea>
                </div>

                <div class="card" data-q="biz-0b">
                    <label class="q-label"><span class="q-num">2</span><span class="q-text">How is the IT / engineering team structured?</span></label>
                    <textarea name="team-structure" rows="4" placeholder="e.g., 'Central IT team of 8 in Sydney, 3 devs in UK for Ubisend, 2 ops in Singapore'..."></textarea>
                </div>

                <div class="card" data-q="biz-0c">
                    <label class="q-label"><span class="q-num">3</span><span class="q-text">Is there a dedicated security person or team, or does security fall under IT?</span></label>
                    <div class="opts">
                        <label class="opt"><input type="radio" name="security-team" value="dedicated"><span class="opt-mark"></span><span class="opt-text">Dedicated security team or person</span></label>
                        <label class="opt"><input type="radio" name="security-team" value="it-shared"><span class="opt-mark"></span><span class="opt-text">Security is part of the IT team's responsibilities</span></label>
                        <label class="opt"><input type="radio" name="security-team" value="outsourced"><span class="opt-mark"></span><span class="opt-text">Outsourced to a third party</span></label>
                        <label class="opt"><input type="radio" name="security-team" value="none"><span class="opt-mark"></span><span class="opt-text">No formal security function currently</span></label>
                        <label class="opt"><input type="radio" name="security-team" value="other"><span class="opt-mark"></span><span class="opt-text">Other</span></label>
                        <input type="text" class="other-input" name="security-team-other" placeholder="Please specify...">
                    </div>
                </div>

                <div class="card" data-q="biz-0d">
                    <label class="q-label"><span class="q-num">4</span><span class="q-text">Where are staff located?<span class="q-hint">Select all regions with employees or contractors</span></span></label>
                    <div class="opts">
                        <label class="opt"><input type="checkbox" name="staff-locations" value="au"><span class="opt-mark check"></span><span class="opt-text">Australia</span></label>
                        <label class="opt"><input type="checkbox" name="staff-locations" value="uk"><span class="opt-mark check"></span><span class="opt-text">United Kingdom</span></label>
                        <label class="opt"><input type="checkbox" name="staff-locations" value="sg"><span class="opt-mark check"></span><span class="opt-text">Singapore</span></label>
                        <label class="opt"><input type="checkbox" name="staff-locations" value="my"><span class="opt-mark check"></span><span class="opt-text">Malaysia</span></label>
                        <label class="opt"><input type="checkbox" name="staff-locations" value="other"><span class="opt-mark check"></span><span class="opt-text">Other</span></label>
                        <input type="text" class="other-input" name="staff-locations-other" placeholder="Please specify...">
                    </div>
                </div>
            </div>

            <div class="subsec">
                <div class="subsec-title">Whispir Integration</div>

                <div class="card" data-q="biz-1">
                    <label class="q-label"><span class="q-num">5</span><span class="q-text">What's the current state of Whispir infrastructure?</span></label>
                    <div class="opts">
                        <label class="opt"><input type="radio" name="whispir-status" value="migrated"><span class="opt-mark"></span><span class="opt-text">Fully migrated into Soprano infrastructure</span></label>
                        <label class="opt"><input type="radio" name="whispir-status" value="separate"><span class="opt-mark"></span><span class="opt-text">Still running as separate AWS accounts</span></label>
                        <label class="opt"><input type="radio" name="whispir-status" value="hybrid"><span class="opt-mark"></span><span class="opt-text">Hybrid - some migrated, some standalone</span></label>
                        <label class="opt"><input type="radio" name="whispir-status" value="unknown"><span class="opt-mark"></span><span class="opt-text">Not sure / need to check</span></label>
                        <label class="opt"><input type="radio" name="whispir-status" value="other"><span class="opt-mark"></span><span class="opt-text">Other</span></label>
                        <input type="text" class="other-input" name="whispir-status-other" placeholder="Please specify...">
                    </div>
                </div>

                <div class="card" data-q="biz-2">
                    <label class="q-label"><span class="q-num">6</span><span class="q-text">Are Whispir's APIs and customer portal still live and accepting traffic?</span></label>
                    <div class="opts">
                        <label class="opt"><input type="radio" name="whispir-apis" value="live"><span class="opt-mark"></span><span class="opt-text">Yes, still accepting traffic</span></label>
                        <label class="opt"><input type="radio" name="whispir-apis" value="redirected"><span class="opt-mark"></span><span class="opt-text">Redirecting to Soprano Connect</span></label>
                        <label class="opt"><input type="radio" name="whispir-apis" value="shutdown"><span class="opt-mark"></span><span class="opt-text">Fully shut down</span></label>
                        <label class="opt"><input type="radio" name="whispir-apis" value="unknown"><span class="opt-mark"></span><span class="opt-text">Not sure</span></label>
                        <label class="opt"><input type="radio" name="whispir-apis" value="other"><span class="opt-mark"></span><span class="opt-text">Other</span></label>
                        <input type="text" class="other-input" name="whispir-apis-other" placeholder="Please specify...">
                    </div>
                </div>
            </div>

            <div class="subsec">
                <div class="subsec-title">Ubisend / Conversational AI Platform</div>

                <div class="card" data-q="biz-3">
                    <label class="q-label"><span class="q-num">7</span><span class="q-text">Where does the Ubisend platform run today?</span></label>
                    <div class="opts">
                        <label class="opt"><input type="radio" name="ubisend-hosting" value="uk"><span class="opt-mark"></span><span class="opt-text">Still in original UK infrastructure</span></label>
                        <label class="opt"><input type="radio" name="ubisend-hosting" value="consolidated"><span class="opt-mark"></span><span class="opt-text">Consolidated into main Soprano infrastructure</span></label>
                        <label class="opt"><input type="radio" name="ubisend-hosting" value="hybrid"><span class="opt-mark"></span><span class="opt-text">Mix of both</span></label>
                        <label class="opt"><input type="radio" name="ubisend-hosting" value="unknown"><span class="opt-mark"></span><span class="opt-text">Not sure</span></label>
                        <label class="opt"><input type="radio" name="ubisend-hosting" value="other"><span class="opt-mark"></span><span class="opt-text">Other</span></label>
                        <input type="text" class="other-input" name="ubisend-hosting-other" placeholder="Please specify...">
                    </div>
                </div>

                <div class="card" data-q="biz-4">
                    <label class="q-label"><span class="q-num">8</span><span class="q-text">Does the UK team still manage Ubisend independently?</span></label>
                    <div class="opts">
                        <label class="opt"><input type="radio" name="ubisend-mgmt" value="uk"><span class="opt-mark"></span><span class="opt-text">UK team manages independently</span></label>
                        <label class="opt"><input type="radio" name="ubisend-mgmt" value="central"><span class="opt-mark"></span><span class="opt-text">Now under central IT</span></label>
                        <label class="opt"><input type="radio" name="ubisend-mgmt" value="shared"><span class="opt-mark"></span><span class="opt-text">Shared responsibility</span></label>
                        <label class="opt"><input type="radio" name="ubisend-mgmt" value="other"><span class="opt-mark"></span><span class="opt-text">Other</span></label>
                        <input type="text" class="other-input" name="ubisend-mgmt-other" placeholder="Please specify...">
                    </div>
                </div>
            </div>

            <div class="subsec">
                <div class="subsec-title">APAC Regional Operations</div>

                <div class="card" data-q="biz-5">
                    <label class="q-label"><span class="q-num">9</span><span class="q-text">Are Singapore and Malaysia still operating as separate regional messaging hubs?</span></label>
                    <div class="opts">
                        <label class="opt"><input type="radio" name="apac-status" value="separate"><span class="opt-mark"></span><span class="opt-text">Yes, still independent hubs with their own carrier connections</span></label>
                        <label class="opt"><input type="radio" name="apac-status" value="consolidated"><span class="opt-mark"></span><span class="opt-text">Fully consolidated into Soprano Connect</span></label>
                        <label class="opt"><input type="radio" name="apac-status" value="partial"><span class="opt-mark"></span><span class="opt-text">Partially consolidated</span></label>
                        <label class="opt"><input type="radio" name="apac-status" value="unknown"><span class="opt-mark"></span><span class="opt-text">Not sure</span></label>
                        <label class="opt"><input type="radio" name="apac-status" value="other"><span class="opt-mark"></span><span class="opt-text">Other</span></label>
                        <input type="text" class="other-input" name="apac-status-other" placeholder="Please specify...">
                    </div>
                </div>

                <div class="card" data-q="biz-6">
                    <label class="q-label"><span class="q-num">10</span><span class="q-text">Do Singapore/Malaysia have their own IT staff making configuration changes?</span></label>
                    <div class="opts">
                        <label class="opt"><input type="radio" name="apac-staff" value="local"><span class="opt-mark"></span><span class="opt-text">Yes, local staff manage routing and carrier connections</span></label>
                        <label class="opt"><input type="radio" name="apac-staff" value="central"><span class="opt-mark"></span><span class="opt-text">No, all managed centrally</span></label>
                        <label class="opt"><input type="radio" name="apac-staff" value="mixed"><span class="opt-mark"></span><span class="opt-text">Mix - some local, some central</span></label>
                        <label class="opt"><input type="radio" name="apac-staff" value="other"><span class="opt-mark"></span><span class="opt-text">Other</span></label>
                        <input type="text" class="other-input" name="apac-staff-other" placeholder="Please specify...">
                    </div>
                </div>
            </div>

            <div class="subsec">
                <div class="subsec-title">Legacy & Unmanaged Systems</div>

                <div class="card" data-q="biz-7">
                    <label class="q-label"><span class="q-num">11</span><span class="q-text">Are there systems officially "end of life" but still running because customers haven't migrated?<span class="q-hint">These are often overlooked but still need monitoring</span></span></label>
                    <div class="opts">
                        <label class="opt"><input type="radio" name="legacy-eol" value="yes"><span class="opt-mark"></span><span class="opt-text">Yes, there are some</span></label>
                        <label class="opt"><input type="radio" name="legacy-eol" value="no"><span class="opt-mark"></span><span class="opt-text">No, everything old has been decommissioned</span></label>
                        <label class="opt"><input type="radio" name="legacy-eol" value="unknown"><span class="opt-mark"></span><span class="opt-text">Not sure</span></label>
                        <label class="opt"><input type="radio" name="legacy-eol" value="other"><span class="opt-mark"></span><span class="opt-text">Other</span></label>
                        <input type="text" class="other-input" name="legacy-eol-other" placeholder="Please specify...">
                    </div>
                </div>

                <div class="card" data-q="biz-8">
                    <label class="q-label"><span class="q-num">12</span><span class="q-text">Are there tools, servers, or SaaS subscriptions from other teams that aren't on your official asset register?<span class="q-hint">Shadow IT from past integrations is a common blind spot</span></span></label>
                    <textarea name="shadow-it" placeholder="List anything you're aware of, or 'None that we know of'..."></textarea>
                </div>
            </div>

            <div class="nav-btns">
                <div></div>
                <button class="btn btn-pri" onclick="goTo('infrastructure')">Continue to Infrastructure &rarr;</button>
            </div>
        </section>

        <!-- INFRASTRUCTURE -->
        <section class="section" id="s-infrastructure">
            <div class="section-header">
                <h2 class="section-title">Infrastructure Overview</h2>
                <p class="section-desc">Help us map the full picture of your infrastructure across cloud and on-premise.</p>
            </div>

            <div class="card" data-q="infra-1">
                <label class="q-label"><span class="q-num">1</span><span class="q-text">How many Azure subscriptions exist today? Are they all under one tenant?<span class="q-hint">Include any created for subsidiary entities or new projects</span></span></label>
                <textarea name="azure-subs" placeholder="e.g., '5 subscriptions, all under main tenant' or 'Main tenant has 3, Whispir has 2 separate'..."></textarea>
            </div>

            <div class="card" data-q="infra-2">
                <label class="q-label"><span class="q-num">2</span><span class="q-text">How many AWS accounts are in use? Are they in a single AWS Organization?</span></label>
                <textarea name="aws-accounts" placeholder="e.g., '8 accounts in one Organization' or 'Main org has 5, subsidiary companies have 3 outside'..."></textarea>
            </div>

            <div class="card" data-q="infra-3">
                <label class="q-label"><span class="q-num">3</span><span class="q-text">Any workloads in other cloud providers?</span></label>
                <div class="grid-opts">
                    <label class="opt"><input type="checkbox" name="other-clouds" value="gcp"><span class="opt-mark check"></span><span class="opt-text">Google Cloud</span></label>
                    <label class="opt"><input type="checkbox" name="other-clouds" value="oracle"><span class="opt-mark check"></span><span class="opt-text">Oracle Cloud</span></label>
                    <label class="opt"><input type="checkbox" name="other-clouds" value="regional"><span class="opt-mark check"></span><span class="opt-text">Regional APAC providers</span></label>
                    <label class="opt"><input type="checkbox" name="other-clouds" value="none"><span class="opt-mark check"></span><span class="opt-text">None - just Azure/AWS</span></label>
                    <label class="opt"><input type="checkbox" name="other-clouds" value="other"><span class="opt-mark check"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="other-clouds-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="card" data-q="infra-4">
                <label class="q-label"><span class="q-num">4</span><span class="q-text">What on-premise infrastructure still exists?</span></label>
                <div class="opts">
                    <label class="opt"><input type="checkbox" name="on-prem" value="sydney"><span class="opt-mark check"></span><span class="opt-text">Sydney head office servers</span></label>
                    <label class="opt"><input type="checkbox" name="on-prem" value="uk"><span class="opt-mark check"></span><span class="opt-text">UK operations infrastructure</span></label>
                    <label class="opt"><input type="checkbox" name="on-prem" value="acquired"><span class="opt-mark check"></span><span class="opt-text">Subsidiary data centres</span></label>
                    <label class="opt"><input type="checkbox" name="on-prem" value="colo"><span class="opt-mark check"></span><span class="opt-text">Co-location facilities</span></label>
                    <label class="opt"><input type="checkbox" name="on-prem" value="none"><span class="opt-mark check"></span><span class="opt-text">None - fully cloud</span></label>
                    <label class="opt"><input type="checkbox" name="on-prem" value="other"><span class="opt-mark check"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="on-prem-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="card" data-q="infra-5">
                <label class="q-label"><span class="q-num">5</span><span class="q-text">Does the WAF protect all internet-facing services, or just specific applications?</span></label>
                <div class="opts">
                    <label class="opt"><input type="radio" name="waf-coverage" value="all"><span class="opt-mark"></span><span class="opt-text">Covers everything internet-facing</span></label>
                    <label class="opt"><input type="radio" name="waf-coverage" value="partial"><span class="opt-mark"></span><span class="opt-text">Only specific applications (some bypass it)</span></label>
                    <label class="opt"><input type="radio" name="waf-coverage" value="unknown"><span class="opt-mark"></span><span class="opt-text">Not sure</span></label>
                    <label class="opt"><input type="radio" name="waf-coverage" value="other"><span class="opt-mark"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="waf-coverage-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="card" data-q="infra-6">
                <label class="q-label"><span class="q-num">6</span><span class="q-text">Any dedicated connections to partners/carriers that bypass standard perimeter?<span class="q-hint">e.g., Private links to Telstra, AWS Direct Connect, Azure ExpressRoute</span></span></label>
                <textarea name="dedicated-links" placeholder="List any dedicated connections, or 'None'..."></textarea>
            </div>

            <div class="card" data-q="infra-7">
                <label class="q-label"><span class="q-num">7</span><span class="q-text">What collaboration and email platform is in use?</span></label>
                <div class="opts">
                    <label class="opt"><input type="radio" name="collab-platform" value="m365"><span class="opt-mark"></span><span class="opt-text">Microsoft 365 (Exchange, Teams, SharePoint)</span></label>
                    <label class="opt"><input type="radio" name="collab-platform" value="google"><span class="opt-mark"></span><span class="opt-text">Google Workspace</span></label>
                    <label class="opt"><input type="radio" name="collab-platform" value="mixed"><span class="opt-mark"></span><span class="opt-text">Mix - different platforms across teams or regions</span></label>
                    <label class="opt"><input type="radio" name="collab-platform" value="other"><span class="opt-mark"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="collab-platform-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="card" data-q="infra-8">
                <label class="q-label"><span class="q-num">8</span><span class="q-text">Is there network segmentation between production, corporate, and development environments?</span></label>
                <div class="opts">
                    <label class="opt"><input type="radio" name="network-seg" value="full"><span class="opt-mark"></span><span class="opt-text">Yes, fully segmented with firewall rules between zones</span></label>
                    <label class="opt"><input type="radio" name="network-seg" value="partial"><span class="opt-mark"></span><span class="opt-text">Partially - some separation but not consistently enforced</span></label>
                    <label class="opt"><input type="radio" name="network-seg" value="flat"><span class="opt-mark"></span><span class="opt-text">Mostly flat - limited segmentation</span></label>
                    <label class="opt"><input type="radio" name="network-seg" value="unknown"><span class="opt-mark"></span><span class="opt-text">Not sure</span></label>
                    <label class="opt"><input type="radio" name="network-seg" value="other"><span class="opt-mark"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="network-seg-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="card" data-q="infra-9">
                <label class="q-label"><span class="q-num">9</span><span class="q-text">What does your backup and disaster recovery posture look like?<span class="q-hint">Particularly for the messaging platform and customer data</span></span></label>
                <textarea name="backup-dr" rows="4" placeholder="e.g., 'Daily snapshots to secondary region, 4-hour RPO, tested quarterly' or 'Backups exist but DR hasn't been tested'..."></textarea>
            </div>

            <div class="nav-btns">
                <button class="btn btn-sec" onclick="goTo('business')">&larr; Back</button>
                <button class="btn btn-pri" onclick="goTo('identity')">Continue to Identity &rarr;</button>
            </div>
        </section>

        <!-- IDENTITY -->
        <section class="section" id="s-identity">
            <div class="section-header">
                <h2 class="section-title">Identity & Access</h2>
                <p class="section-desc">Understanding how access is managed across your global teams.</p>
            </div>

            <div class="card" data-q="id-1">
                <label class="q-label"><span class="q-num">1</span><span class="q-text">Is everyone across all regions authenticating through a central identity provider?</span></label>
                <div class="opts">
                    <label class="opt"><input type="radio" name="central-idp" value="yes-entra"><span class="opt-mark"></span><span class="opt-text">Yes, everyone uses Entra ID (Azure AD)</span></label>
                    <label class="opt"><input type="radio" name="central-idp" value="yes-other"><span class="opt-mark"></span><span class="opt-text">Yes, but different IdP (Okta, etc.)</span></label>
                    <label class="opt"><input type="radio" name="central-idp" value="mostly"><span class="opt-mark"></span><span class="opt-text">Mostly, but some teams have separate directories</span></label>
                    <label class="opt"><input type="radio" name="central-idp" value="fragmented"><span class="opt-mark"></span><span class="opt-text">Fragmented - different regions use different systems</span></label>
                    <label class="opt"><input type="radio" name="central-idp" value="other"><span class="opt-mark"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="central-idp-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="card" data-q="id-2">
                <label class="q-label"><span class="q-num">2</span><span class="q-text">For production systems, is privileged access tracked?</span></label>
                <div class="opts">
                    <label class="opt"><input type="radio" name="priv-access" value="pam"><span class="opt-mark"></span><span class="opt-text">Yes, through a PAM solution</span></label>
                    <label class="opt"><input type="radio" name="priv-access" value="documented"><span class="opt-mark"></span><span class="opt-text">Documented but not centrally managed</span></label>
                    <label class="opt"><input type="radio" name="priv-access" value="tribal"><span class="opt-mark"></span><span class="opt-text">Tribal knowledge - key people know who has access</span></label>
                    <label class="opt"><input type="radio" name="priv-access" value="unknown"><span class="opt-mark"></span><span class="opt-text">Not consistently tracked</span></label>
                    <label class="opt"><input type="radio" name="priv-access" value="other"><span class="opt-mark"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="priv-access-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="card" data-q="id-3">
                <label class="q-label"><span class="q-num">3</span><span class="q-text">How do engineers access production systems?</span></label>
                <div class="opts">
                    <label class="opt"><input type="checkbox" name="prod-access" value="jump"><span class="opt-mark check"></span><span class="opt-text">Jump hosts / bastion servers</span></label>
                    <label class="opt"><input type="checkbox" name="prod-access" value="vpn"><span class="opt-mark check"></span><span class="opt-text">VPN then direct access</span></label>
                    <label class="opt"><input type="checkbox" name="prod-access" value="cloud-console"><span class="opt-mark check"></span><span class="opt-text">Cloud console (AWS SSM, Azure Bastion)</span></label>
                    <label class="opt"><input type="checkbox" name="prod-access" value="direct"><span class="opt-mark check"></span><span class="opt-text">Direct SSH/RDP</span></label>
                    <label class="opt"><input type="checkbox" name="prod-access" value="other"><span class="opt-mark check"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="prod-access-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="card" data-q="id-4">
                <label class="q-label"><span class="q-num">4</span><span class="q-text">When someone leaves, how confident are you access is revoked across all systems?<span class="q-hint">Including all platforms, regional systems, service accounts</span></span></label>
                <div class="opts">
                    <label class="opt"><input type="radio" name="offboarding" value="very"><span class="opt-mark"></span><span class="opt-text">Very confident - automated process covers everything</span></label>
                    <label class="opt"><input type="radio" name="offboarding" value="mostly"><span class="opt-mark"></span><span class="opt-text">Mostly confident - main systems covered, might miss edge cases</span></label>
                    <label class="opt"><input type="radio" name="offboarding" value="not"><span class="opt-mark"></span><span class="opt-text">Not very confident - manual process, things get missed</span></label>
                    <label class="opt"><input type="radio" name="offboarding" value="unknown"><span class="opt-mark"></span><span class="opt-text">Honestly not sure</span></label>
                    <label class="opt"><input type="radio" name="offboarding" value="other"><span class="opt-mark"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="offboarding-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="card" data-q="id-5">
                <label class="q-label"><span class="q-num">5</span><span class="q-text">Do any third parties have access to your systems?<span class="q-hint">Vendors, contractors, carrier partners, retained staff from integrations</span></span></label>
                <textarea name="third-party" placeholder="List any third parties with system access..."></textarea>
            </div>

            <div class="nav-btns">
                <button class="btn btn-sec" onclick="goTo('infrastructure')">&larr; Back</button>
                <button class="btn btn-pri" onclick="goTo('platform')">Continue to Platform &rarr;</button>
            </div>
        </section>

        <!-- PLATFORM -->
        <section class="section" id="s-platform">
            <div class="section-header">
                <h2 class="section-title">Soprano Connect Platform</h2>
                <p class="section-desc">Understanding your core messaging platform to identify monitoring gaps.</p>
            </div>

            <div class="card" data-q="plat-1">
                <label class="q-label"><span class="q-num">1</span><span class="q-text">What logging exists within Soprano Connect?</span></label>
                <div class="opts">
                    <label class="opt"><input type="checkbox" name="platform-logs" value="admin"><span class="opt-mark check"></span><span class="opt-text">Admin actions (user creation, permission changes)</span></label>
                    <label class="opt"><input type="checkbox" name="platform-logs" value="api-auth"><span class="opt-mark check"></span><span class="opt-text">API authentication events (success/failure)</span></label>
                    <label class="opt"><input type="checkbox" name="platform-logs" value="routing"><span class="opt-mark check"></span><span class="opt-text">Message routing and delivery receipts</span></label>
                    <label class="opt"><input type="checkbox" name="platform-logs" value="fraud"><span class="opt-mark check"></span><span class="opt-text">Fraud detection alerts (AIT, SIM swap)</span></label>
                    <label class="opt"><input type="checkbox" name="platform-logs" value="unsure"><span class="opt-mark check"></span><span class="opt-text">Not sure what logging exists</span></label>
                    <label class="opt"><input type="checkbox" name="platform-logs" value="other"><span class="opt-mark check"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="platform-logs-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="card" data-q="plat-2">
                <label class="q-label"><span class="q-num">2</span><span class="q-text">For OTP/2FA messages, is the OTP content visible in any logs or masked?</span></label>
                <div class="opts">
                    <label class="opt"><input type="radio" name="otp-visibility" value="masked"><span class="opt-mark"></span><span class="opt-text">Always masked in logs</span></label>
                    <label class="opt"><input type="radio" name="otp-visibility" value="some"><span class="opt-mark"></span><span class="opt-text">Visible in some places (debug logs)</span></label>
                    <label class="opt"><input type="radio" name="otp-visibility" value="visible"><span class="opt-mark"></span><span class="opt-text">Visible in logs</span></label>
                    <label class="opt"><input type="radio" name="otp-visibility" value="unknown"><span class="opt-mark"></span><span class="opt-text">Not sure</span></label>
                    <label class="opt"><input type="radio" name="otp-visibility" value="other"><span class="opt-mark"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="otp-visibility-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="card" data-q="plat-3">
                <label class="q-label"><span class="q-num">3</span><span class="q-text">Where are customer API keys and portal credentials stored?</span></label>
                <div class="opts">
                    <label class="opt"><input type="radio" name="cred-storage" value="secrets"><span class="opt-mark"></span><span class="opt-text">Dedicated secrets manager (Vault, AWS Secrets Manager)</span></label>
                    <label class="opt"><input type="radio" name="cred-storage" value="encrypted-db"><span class="opt-mark"></span><span class="opt-text">Encrypted in application database</span></label>
                    <label class="opt"><input type="radio" name="cred-storage" value="config"><span class="opt-mark"></span><span class="opt-text">Application config files</span></label>
                    <label class="opt"><input type="radio" name="cred-storage" value="unknown"><span class="opt-mark"></span><span class="opt-text">Not sure</span></label>
                    <label class="opt"><input type="radio" name="cred-storage" value="other"><span class="opt-mark"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="cred-storage-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="card" data-q="plat-4">
                <label class="q-label"><span class="q-num">4</span><span class="q-text">When fraud detection triggers (AIT, SIM swap), where do those alerts go?</span></label>
                <div class="opts">
                    <label class="opt"><input type="checkbox" name="fraud-alerts" value="email"><span class="opt-mark check"></span><span class="opt-text">Email to ops team</span></label>
                    <label class="opt"><input type="checkbox" name="fraud-alerts" value="dashboard"><span class="opt-mark check"></span><span class="opt-text">Platform dashboard</span></label>
                    <label class="opt"><input type="checkbox" name="fraud-alerts" value="ticketing"><span class="opt-mark check"></span><span class="opt-text">Ticketing system</span></label>
                    <label class="opt"><input type="checkbox" name="fraud-alerts" value="logs"><span class="opt-mark check"></span><span class="opt-text">Just in logs</span></label>
                    <label class="opt"><input type="checkbox" name="fraud-alerts" value="unknown"><span class="opt-mark check"></span><span class="opt-text">Not sure</span></label>
                    <label class="opt"><input type="checkbox" name="fraud-alerts" value="other"><span class="opt-mark check"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="fraud-alerts-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="card" data-q="plat-5">
                <label class="q-label"><span class="q-num">5</span><span class="q-text">If a customer account was compromised and used to send phishing at volume, what would trigger an alert?</span></label>
                <textarea name="phishing-detection" placeholder="Describe what monitoring exists (if any) to detect abuse of customer accounts..."></textarea>
            </div>

            <div class="nav-btns">
                <button class="btn btn-sec" onclick="goTo('identity')">&larr; Back</button>
                <button class="btn btn-pri" onclick="goTo('endpoints')">Continue to Endpoints &rarr;</button>
            </div>
        </section>

        <!-- ENDPOINTS -->
        <section class="section" id="s-endpoints">
            <div class="section-header">
                <h2 class="section-title">CrowdStrike & Endpoints</h2>
                <p class="section-desc">Understanding your endpoint protection setup and how it fits into the broader monitoring picture.</p>
            </div>

            <div class="card" data-q="ep-1">
                <label class="q-label"><span class="q-num">1</span><span class="q-text">Where is CrowdStrike deployed?</span></label>
                <div class="opts">
                    <label class="opt"><input type="checkbox" name="cs-deploy" value="workstations"><span class="opt-mark check"></span><span class="opt-text">All Windows workstations</span></label>
                    <label class="opt"><input type="checkbox" name="cs-deploy" value="win-servers"><span class="opt-mark check"></span><span class="opt-text">Windows servers</span></label>
                    <label class="opt"><input type="checkbox" name="cs-deploy" value="linux"><span class="opt-mark check"></span><span class="opt-text">Linux servers</span></label>
                    <label class="opt"><input type="checkbox" name="cs-deploy" value="mac"><span class="opt-mark check"></span><span class="opt-text">Mac devices</span></label>
                    <label class="opt"><input type="checkbox" name="cs-deploy" value="all-regions"><span class="opt-mark check"></span><span class="opt-text">All regions including subsidiary entities</span></label>
                    <label class="opt"><input type="checkbox" name="cs-deploy" value="other"><span class="opt-mark check"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="cs-deploy-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="card" data-q="ep-2">
                <label class="q-label"><span class="q-num">2</span><span class="q-text">Who monitors CrowdStrike alerts today?</span></label>
                <div class="opts">
                    <label class="opt"><input type="radio" name="cs-monitoring" value="dedicated"><span class="opt-mark"></span><span class="opt-text">Dedicated person/team reviews regularly</span></label>
                    <label class="opt"><input type="radio" name="cs-monitoring" value="it-team"><span class="opt-mark"></span><span class="opt-text">IT team checks when they have time</span></label>
                    <label class="opt"><input type="radio" name="cs-monitoring" value="reactive"><span class="opt-mark"></span><span class="opt-text">Only looked at when something breaks</span></label>
                    <label class="opt"><input type="radio" name="cs-monitoring" value="nobody"><span class="opt-mark"></span><span class="opt-text">Alerts are accumulating unactioned</span></label>
                    <label class="opt"><input type="radio" name="cs-monitoring" value="other"><span class="opt-mark"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="cs-monitoring-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="card" data-q="ep-3">
                <label class="q-label"><span class="q-num">3</span><span class="q-text">Are there any barriers to integrating CrowdStrike with Sentinel?</span></label>
                <div class="opts">
                    <label class="opt"><input type="checkbox" name="cs-no-ingest" value="cost"><span class="opt-mark check"></span><span class="opt-text">Cost concerns</span></label>
                    <label class="opt"><input type="checkbox" name="cs-no-ingest" value="complexity"><span class="opt-mark check"></span><span class="opt-text">Technical complexity</span></label>
                    <label class="opt"><input type="checkbox" name="cs-no-ingest" value="volume"><span class="opt-mark check"></span><span class="opt-text">Concern about alert volume</span></label>
                    <label class="opt"><input type="checkbox" name="cs-no-ingest" value="not-prioritised"><span class="opt-mark check"></span><span class="opt-text">Just hasn't been prioritised</span></label>
                    <label class="opt"><input type="checkbox" name="cs-no-ingest" value="no-barriers"><span class="opt-mark check"></span><span class="opt-text">No barriers - open to integrating</span></label>
                    <label class="opt"><input type="checkbox" name="cs-no-ingest" value="other"><span class="opt-mark check"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="cs-no-ingest-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="card" data-q="ep-4">
                <label class="q-label"><span class="q-num">4</span><span class="q-text">If CrowdStrike detected a compromise, how would your MDR provider be notified?</span></label>
                <div class="opts">
                    <label class="opt"><input type="radio" name="cs-escalation" value="auto"><span class="opt-mark"></span><span class="opt-text">Automatically - integrated alerting is in place</span></label>
                    <label class="opt"><input type="radio" name="cs-escalation" value="manual"><span class="opt-mark"></span><span class="opt-text">Manually - our team would escalate it</span></label>
                    <label class="opt"><input type="radio" name="cs-escalation" value="no-path"><span class="opt-mark"></span><span class="opt-text">No notification path exists currently</span></label>
                    <label class="opt"><input type="radio" name="cs-escalation" value="other"><span class="opt-mark"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="cs-escalation-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="nav-btns">
                <button class="btn btn-sec" onclick="goTo('platform')">&larr; Back</button>
                <button class="btn btn-pri" onclick="goTo('risk')">Continue to Risk &rarr;</button>
            </div>
        </section>

        <!-- RISK -->
        <section class="section" id="s-risk">
            <div class="section-header">
                <h2 class="section-title">Risk & Priorities</h2>
                <p class="section-desc">Understanding what matters most so we can prioritise coverage.</p>
            </div>

            <div class="card" data-q="risk-1">
                <label class="q-label"><span class="q-num">1</span><span class="q-text">Which systems are most critical to the business? If unavailable, which would have the biggest impact?</span></label>
                <textarea name="critical-systems" rows="5" placeholder="List your top 5 systems in order of criticality..."></textarea>
            </div>

            <div class="card" data-q="risk-2">
                <label class="q-label"><span class="q-num">2</span><span class="q-text">For each scenario, what level of detection capability exists today?</span></label>
                <table class="matrix">
                    <tr><th>Scenario</th><th style="width: 160px;">Detection Level</th></tr>
                    <tr><td>Compromised customer API key sending phishing at scale</td><td><select name="detect-api"><option value="">Select...</option><option value="high">High</option><option value="medium">Medium</option><option value="low">Low</option><option value="none">None</option></select></td></tr>
                    <tr><td>Insider accessing customer message data</td><td><select name="detect-insider"><option value="">Select...</option><option value="high">High</option><option value="medium">Medium</option><option value="low">Low</option><option value="none">None</option></select></td></tr>
                    <tr><td>Attacker pivoting from subsidiary infrastructure to core platform</td><td><select name="detect-pivot"><option value="">Select...</option><option value="high">High</option><option value="medium">Medium</option><option value="low">Low</option><option value="none">None</option></select></td></tr>
                    <tr><td>SMS pumping / AIT fraud through your platform</td><td><select name="detect-ait"><option value="">Select...</option><option value="high">High</option><option value="medium">Medium</option><option value="low">Low</option><option value="none">None</option></select></td></tr>
                    <tr><td>Ransomware spreading from endpoints to production</td><td><select name="detect-ransom"><option value="">Select...</option><option value="high">High</option><option value="medium">Medium</option><option value="low">Low</option><option value="none">None</option></select></td></tr>
                </table>
            </div>

            <div class="card" data-q="risk-3">
                <label class="q-label"><span class="q-num">3</span><span class="q-text">Which compliance frameworks apply?</span></label>
                <div class="grid-opts">
                    <label class="opt"><input type="checkbox" name="compliance" value="iso27001"><span class="opt-mark check"></span><span class="opt-text">ISO 27001</span></label>
                    <label class="opt"><input type="checkbox" name="compliance" value="soc2"><span class="opt-mark check"></span><span class="opt-text">SOC 2</span></label>
                    <label class="opt"><input type="checkbox" name="compliance" value="nhs"><span class="opt-mark check"></span><span class="opt-text">NHS DSP Toolkit</span></label>
                    <label class="opt"><input type="checkbox" name="compliance" value="pci"><span class="opt-mark check"></span><span class="opt-text">PCI-DSS</span></label>
                    <label class="opt"><input type="checkbox" name="compliance" value="pspf"><span class="opt-mark check"></span><span class="opt-text">Australian PSPF/ISM</span></label>
                    <label class="opt"><input type="checkbox" name="compliance" value="gdpr"><span class="opt-mark check"></span><span class="opt-text">GDPR</span></label>
                    <label class="opt"><input type="checkbox" name="compliance" value="other"><span class="opt-mark check"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="compliance-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="card" data-q="risk-4">
                <label class="q-label"><span class="q-num">4</span><span class="q-text">When auditors ask for evidence, what's painful to produce that better logging might solve?</span></label>
                <textarea name="audit-pain" placeholder="e.g., 'Access logs for specific systems', 'Proof of who accessed what data'..."></textarea>
            </div>

            <div class="card" data-q="risk-5">
                <label class="q-label"><span class="q-num">5</span><span class="q-text">If you could improve visibility into one area tomorrow, what would it be?</span></label>
                <textarea name="top-gap" placeholder="Describe the area where you'd most like better visibility..."></textarea>
            </div>

            <div class="nav-btns">
                <button class="btn btn-sec" onclick="goTo('endpoints')">&larr; Back</button>
                <button class="btn btn-pri" onclick="goTo('operations')">Continue to Operations &rarr;</button>
            </div>
        </section>

        <!-- OPERATIONS -->
        <section class="section" id="s-operations">
            <div class="section-header">
                <h2 class="section-title">Operational Realities</h2>
                <p class="section-desc">So we can make practical recommendations that work for your team.</p>
            </div>

            <div class="card" data-q="ops-1">
                <label class="q-label"><span class="q-num">1</span><span class="q-text">How much capacity does the team have for dedicated security work?</span></label>
                <div class="opts">
                    <label class="opt"><input type="radio" name="capacity" value="dedicated"><span class="opt-mark"></span><span class="opt-text">We have dedicated time for security</span></label>
                    <label class="opt"><input type="radio" name="capacity" value="some"><span class="opt-mark"></span><span class="opt-text">A few hours per week when things are quiet</span></label>
                    <label class="opt"><input type="radio" name="capacity" value="reactive"><span class="opt-mark"></span><span class="opt-text">Mostly reactive - only when something happens</span></label>
                    <label class="opt"><input type="radio" name="capacity" value="none"><span class="opt-mark"></span><span class="opt-text">Very limited - keeping lights on takes everything</span></label>
                    <label class="opt"><input type="radio" name="capacity" value="other"><span class="opt-mark"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="capacity-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="card" data-q="ops-2">
                <label class="q-label"><span class="q-num">2</span><span class="q-text">If alert volume from Sentinel increases, is there capacity to respond?</span></label>
                <div class="opts">
                    <label class="opt"><input type="radio" name="alert-capacity" value="yes"><span class="opt-mark"></span><span class="opt-text">Yes, we can handle more alerts</span></label>
                    <label class="opt"><input type="radio" name="alert-capacity" value="high-only"><span class="opt-mark"></span><span class="opt-text">Only if they're high priority and actionable</span></label>
                    <label class="opt"><input type="radio" name="alert-capacity" value="struggle"><span class="opt-mark"></span><span class="opt-text">We'd struggle - already have alert fatigue</span></label>
                    <label class="opt"><input type="radio" name="alert-capacity" value="no"><span class="opt-mark"></span><span class="opt-text">No - prefer the MDR provider handles more</span></label>
                    <label class="opt"><input type="radio" name="alert-capacity" value="other"><span class="opt-mark"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="alert-capacity-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="card" data-q="ops-3">
                <label class="q-label"><span class="q-num">3</span><span class="q-text">When something urgent is detected, who should be contacted?</span></label>
                <textarea name="escalation" rows="4" placeholder="Primary contact: Name, phone, email&#10;Secondary contact: ...&#10;After-hours: ..."></textarea>
            </div>

            <div class="card" data-q="ops-4">
                <label class="q-label"><span class="q-num">4</span><span class="q-text">What's changing in the next 6-12 months that will affect the environment?</span></label>
                <div class="opts">
                    <label class="opt"><input type="checkbox" name="changes" value="decommission"><span class="opt-mark check"></span><span class="opt-text">Decommissioning legacy platforms</span></label>
                    <label class="opt"><input type="checkbox" name="changes" value="new-regions"><span class="opt-mark check"></span><span class="opt-text">New regional deployments</span></label>
                    <label class="opt"><input type="checkbox" name="changes" value="migration"><span class="opt-mark check"></span><span class="opt-text">Cloud migrations or consolidation</span></label>
                    <label class="opt"><input type="checkbox" name="changes" value="products"><span class="opt-mark check"></span><span class="opt-text">New products or features</span></label>
                    <label class="opt"><input type="checkbox" name="changes" value="security-tools"><span class="opt-mark check"></span><span class="opt-text">Changes to security tooling</span></label>
                    <label class="opt"><input type="checkbox" name="changes" value="other"><span class="opt-mark check"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="changes-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="card" data-q="ops-5">
                <label class="q-label"><span class="q-num">5</span><span class="q-text">Are there any log sources or systems you'd like connected to Sentinel that aren't today?<span class="q-hint">e.g., CrowdStrike, application logs, subsidiary infrastructure</span></span></label>
                <textarea name="desired-log-sources" rows="4" placeholder="List any systems or log sources you'd like better visibility into..."></textarea>
            </div>

            <div class="card" data-q="ops-6">
                <label class="q-label"><span class="q-num">6</span><span class="q-text">Has Soprano or any of its subsidiaries experienced security incidents in the past 12 months?<span class="q-hint">Including Whispir, Ubisend, APAC operations, or any other business unit</span></span></label>
                <div class="opts">
                    <label class="opt"><input type="radio" name="past-incidents" value="yes-major"><span class="opt-mark"></span><span class="opt-text">Yes, a significant incident (breach, ransomware, data loss)</span></label>
                    <label class="opt"><input type="radio" name="past-incidents" value="yes-minor"><span class="opt-mark"></span><span class="opt-text">Yes, but minor (phishing attempts, blocked attacks)</span></label>
                    <label class="opt"><input type="radio" name="past-incidents" value="no"><span class="opt-mark"></span><span class="opt-text">No incidents that we're aware of</span></label>
                    <label class="opt"><input type="radio" name="past-incidents" value="prefer-not"><span class="opt-mark"></span><span class="opt-text">Prefer to discuss in person</span></label>
                    <label class="opt"><input type="radio" name="past-incidents" value="other"><span class="opt-mark"></span><span class="opt-text">Other</span></label>
                    <input type="text" class="other-input" name="past-incidents-other" placeholder="Please specify...">
                </div>
            </div>

            <div class="card" data-q="ops-7">
                <label class="q-label"><span class="q-num">7</span><span class="q-text">Is there anything else we should know that hasn't been covered?</span></label>
                <textarea name="anything-else" rows="4" placeholder="Any other systems, concerns, or context..."></textarea>
            </div>

            <div class="nav-btns">
                <button class="btn btn-sec" onclick="goTo('risk')">&larr; Back</button>
                <button class="btn btn-pri" onclick="submitForm()">Submit Responses</button>
            </div>
        </section>

        <!-- COMPLETE -->
        <section class="section" id="s-complete">
            <div class="complete">
                <div class="complete-icon">&#10003;</div>
                <h2>Thank You</h2>
                <p style="color:var(--text-dim); margin-bottom:2rem; max-width:480px; margin-left:auto; margin-right:auto;">Your responses have been saved. We'll use these to prepare tailored findings and recommendations for your environment. Expect to hear from us shortly.</p>
                <button class="btn btn-pri" onclick="downloadResponses()">Download a Copy</button>
            </div>
        </section>

        <footer class="footer">
            <p class="footer-text">Powered by <a href="https://www.armor.com" target="_blank">Armor</a> &middot; MDR Discovery Workshop</p>
        </footer>
    </main>

    <div class="save-toast" id="toast"><span style="font-size:0.9rem;">&#10003;</span> Auto-saved</div>

    <script>
        const sections = ['business','infrastructure','identity','platform','endpoints','risk','operations'];
        const counts = {business:12,infrastructure:9,identity:5,platform:5,endpoints:4,risk:5,operations:7};
        let responses = JSON.parse(localStorage.getItem('soprano-discovery') || '{}');

        document.addEventListener('DOMContentLoaded', () => {
            restoreState();
            setupListeners();
            updateProgress();
        });

        function toggleOtherInput(name, showOther) {
            const otherInput = document.querySelector(`input.other-input[name="${name}-other"]`);
            if (otherInput) {
                if (showOther) {
                    otherInput.classList.add('visible');
                    otherInput.focus();
                } else {
                    otherInput.classList.remove('visible');
                    otherInput.value = '';
                    save(name + '-other', '');
                }
            }
        }

        function setupListeners() {
            document.querySelectorAll('.tab').forEach(t => t.onclick = () => goTo(t.dataset.section));
            document.querySelectorAll('input[type="radio"]').forEach(i => i.onchange = e => {
                document.querySelectorAll(`input[name="${e.target.name}"]`).forEach(r => r.closest('.opt')?.classList.remove('sel'));
                e.target.closest('.opt')?.classList.add('sel');
                save(e.target.name, e.target.value);
                toggleOtherInput(e.target.name, e.target.value === 'other');
                markAnswered(e.target);
            });
            document.querySelectorAll('input[type="checkbox"]').forEach(i => i.onchange = e => {
                e.target.closest('.opt')?.classList.toggle('sel', e.target.checked);
                const vals = [...document.querySelectorAll(`input[name="${e.target.name}"]:checked`)].map(c=>c.value);
                save(e.target.name, vals);
                const hasOther = vals.includes('other');
                toggleOtherInput(e.target.name, hasOther);
                markAnswered(e.target);
            });
            document.querySelectorAll('textarea, input[type="text"]').forEach(i => {
                let t;
                i.oninput = e => { clearTimeout(t); t = setTimeout(() => { save(e.target.name, e.target.value); if(e.target.value.trim()) markAnswered(e.target); }, 400); };
            });
            document.querySelectorAll('select').forEach(s => s.onchange = e => { save(e.target.name, e.target.value); markAnswered(e.target); });
        }

        function goTo(sec) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById('s-'+sec)?.classList.add('active');
            document.querySelector(`.tab[data-section="${sec}"]`)?.classList.add('active');
            window.scrollTo({top:0,behavior:'smooth'});
        }

        function save(k,v) {
            responses[k] = v;
            localStorage.setItem('soprano-discovery', JSON.stringify(responses));
            showToast();
            updateProgress();
        }

        function restoreState() {
            Object.entries(responses).forEach(([k,v]) => {
                if(Array.isArray(v)) {
                    v.forEach(val => {
                        const el = document.querySelector(`input[name="${k}"][value="${val}"]`);
                        if(el) { el.checked = true; el.closest('.opt')?.classList.add('sel'); }
                    });
                    if(v.includes('other')) {
                        const otherInput = document.querySelector(`input.other-input[name="${k}-other"]`);
                        if(otherInput) {
                            otherInput.classList.add('visible');
                            if(responses[k+'-other']) otherInput.value = responses[k+'-other'];
                        }
                    }
                }
                else {
                    const el = document.querySelector(`input[name="${k}"][value="${v}"]`) || document.querySelector(`[name="${k}"]`);
                    if(el) {
                        if(el.type==='radio') {
                            el.checked = true;
                            el.closest('.opt')?.classList.add('sel');
                            if(v === 'other') {
                                const otherInput = document.querySelector(`input.other-input[name="${k}-other"]`);
                                if(otherInput) {
                                    otherInput.classList.add('visible');
                                    if(responses[k+'-other']) otherInput.value = responses[k+'-other'];
                                }
                            }
                        } else {
                            el.value = v;
                        }
                    }
                }
                const inp = document.querySelector(`[name="${k}"]`);
                if(inp && v && (Array.isArray(v) ? v.length : true)) inp.closest('.card')?.classList.add('answered');
            });
        }

        function markAnswered(el) { el.closest('.card')?.classList.add('answered'); }

        function showToast() {
            const t = document.getElementById('toast');
            t.classList.add('show','saved');
            setTimeout(() => t.classList.remove('show'), 1500);
        }

        function updateProgress() {
            let total = 0, answered = 0;
            sections.forEach(sec => {
                const cards = document.querySelectorAll(`#s-${sec} .card`);
                const ans = document.querySelectorAll(`#s-${sec} .card.answered`);
                total += cards.length;
                answered += ans.length;
                const c = document.getElementById('c-'+sec);
                if(c) c.textContent = `${ans.length}/${cards.length}`;
            });
            const pct = total ? Math.round(answered/total*100) : 0;
            document.getElementById('progressFill').style.width = pct+'%';
            document.getElementById('progressText').textContent = pct+'% complete';
        }

        function submitForm() {
            goTo('complete');
            document.getElementById('progressFill').style.width = '100%';
            document.getElementById('progressText').textContent = 'Complete!';
        }

        function downloadResponses() {
            let md = '# Soprano Design MDR Discovery Responses\n\nGenerated: '+new Date().toLocaleString()+'\n\n';
            Object.entries(responses).forEach(([k,v]) => { md += `**${k}:** ${Array.isArray(v)?v.join(', '):v}\n\n`; });
            const blob = new Blob([md], {type:'text/markdown'});
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'soprano-discovery.md';
            a.click();
        }
    </script>
</body>
</html>
